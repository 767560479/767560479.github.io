import{_ as a,o as n,c as l,a as p}from"./app.f86949ad.js";const d=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"04.Git/仓库太大，拉取失败.md","lastUpdated":1764085184000}'),e={name:"04.Git/仓库太大，拉取失败.md"};function o(t,s,c,r,i,y){return n(),l("div",{"data-pagefind-body":!0},[...s[0]||(s[0]=[p(`<p>在使用 git clone 时遇到的错误：“fetch-pack: unexpected disconnect while reading sideband packet”和“fatal: protocol error: bad pack header”。这通常是由于仓库太大，导致 git 无法在默认的缓冲区大小内处理数据。</p><ol><li>使用浅克隆的方法，然后在一步步获取完整历史</li></ol><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">git</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">clone</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">--depth</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">1</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">https://github.com/username/repo.git</span></span>
<span class="line"><span style="color:#82AAFF;">cd</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">repo</span></span>
<span class="line"><span style="color:#FFCB6B;">git</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">fetch</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">--unshallow</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ol start="2"><li>增加缓冲区大小</li></ol><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">git</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">clone</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">--depth</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">1</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">--buffer-size=655360</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">https://github.com/username/repo.git</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ol start="3"><li>切换 HTTP 协议版本</li></ol><p>某些情况下 HTTP/2 协议可能不稳定，可强制使用 HTTP/1.1：</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">git</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">config</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">--global</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">http.version</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">HTTP/1.1</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ol start="4"><li>关闭低速传输限制</li></ol><p>避免因网络波动导致的中断：</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">git</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">config</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">--global</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">http.lowSpeedLimit</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">0</span></span>
<span class="line"><span style="color:#FFCB6B;">git</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">config</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">--global</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">http.lowSpeedTime</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">999999</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><hr><p>分批次下载仓库</p><p>浅层克隆 + 逐步拉取完整历史 对于大型仓库，先下载最近一次提交，再逐步补全历史：</p><div class="language-Bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">Bash</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">git</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">clone</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">--depth</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">1</span><span style="color:#BABED8;"> [仓库链接]       </span><span style="color:#676E95;font-style:italic;"># 仅克隆最新提交</span></span>
<span class="line"><span style="color:#82AAFF;">cd</span><span style="color:#BABED8;"> [仓库目录]</span></span>
<span class="line"><span style="color:#FFCB6B;">git</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">fetch</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">--unshallow</span><span style="color:#BABED8;">              </span><span style="color:#676E95;font-style:italic;"># 拉取完整历史（可能需重试）</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>分阶段增量拉取（适用于持续失败）</p><p>若 --unshallow 失败，可逐步增加拉取深度：</p><div class="language-Bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">Bash</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">git</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">fetch</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">--depth=100</span><span style="color:#BABED8;"> </span><span style="color:#676E95;font-style:italic;"># 首次拉取 100 次提交</span></span>
<span class="line"><span style="color:#FFCB6B;">git</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">fetch</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">--depth=500</span><span style="color:#BABED8;"> </span><span style="color:#676E95;font-style:italic;"># 逐步增加深度</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div>`,18)])])}const b=a(e,[["render",o]]);export{d as __pageData,b as default};
