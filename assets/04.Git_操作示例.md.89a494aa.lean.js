import{_ as s,o as e,c as n,a as l}from"./app.e51826c1.js";const u=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[{"level":2,"title":"把一个文件提交(commit)到了 Git 仓库,以后又想忽略它,可以这么做","slug":"把一个文件提交-commit-到了-git-仓库-以后又想忽略它-可以这么做","link":"#把一个文件提交-commit-到了-git-仓库-以后又想忽略它-可以这么做","children":[]},{"level":2,"title":"初次开发需求前，要先拉取生产/预发分支，然后基于这个分支之上，创建自己的特性分支进行开发","slug":"初次开发需求前-要先拉取生产-预发分支-然后基于这个分支之上-创建自己的特性分支进行开发","link":"#初次开发需求前-要先拉取生产-预发分支-然后基于这个分支之上-创建自己的特性分支进行开发","children":[]},{"level":2,"title":"合并代码到主分支","slug":"合并代码到主分支","link":"#合并代码到主分支","children":[]},{"level":2,"title":"删除远程分支","slug":"删除远程分支","link":"#删除远程分支","children":[]},{"level":2,"title":"删除本地分支","slug":"删除本地分支","link":"#删除本地分支","children":[]},{"level":2,"title":"代码合并错误，并且已经推送到远程分支，如何解决？","slug":"代码合并错误-并且已经推送到远程分支-如何解决","link":"#代码合并错误-并且已经推送到远程分支-如何解决","children":[]},{"level":2,"title":"cherry-pick 指令","slug":"cherry-pick-指令","link":"#cherry-pick-指令","children":[]},{"level":2,"title":"代码回滚","slug":"代码回滚","link":"#代码回滚","children":[]},{"level":2,"title":"查看本地分支与之相对应关系等信息","slug":"查看本地分支与之相对应关系等信息","link":"#查看本地分支与之相对应关系等信息","children":[]},{"level":2,"title":"删除远程仓库中删除的分支的引用。（用到）","slug":"删除远程仓库中删除的分支的引用。-用到","link":"#删除远程仓库中删除的分支的引用。-用到","children":[]},{"level":2,"title":"删除或者说同步本地分支","slug":"删除或者说同步本地分支","link":"#删除或者说同步本地分支","children":[]}],"relativePath":"04.Git/操作示例.md","lastUpdated":1763557946000}'),i={name:"04.Git/操作示例.md"};function p(r,a,t,c,o,d){return e(),n("div",{"data-pagefind-body":!0},[...a[0]||(a[0]=[l(`<h2 id="把一个文件提交-commit-到了-git-仓库-以后又想忽略它-可以这么做" tabindex="-1">把一个文件提交(commit)到了 Git 仓库,以后又想忽略它,可以这么做 <a class="header-anchor" href="#把一个文件提交-commit-到了-git-仓库-以后又想忽略它-可以这么做" aria-hidden="true">#</a></h2><ol><li>在<code>.gitignore</code>文件中添加要忽略的文件路径</li><li>从 Git 的跟踪列表中删除该文件 <blockquote><p>git rm --cached path/to/file 这个命令会从跟踪列表中删除文件,但不会删除工作目录中的实际文件。</p></blockquote></li><li>提交<code>.gitignore</code>和删除跟踪文件的更改</li></ol><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#babed8;">git add .gitignore</span></span>
<span class="line"><span style="color:#babed8;">git commit -m &quot;Untrack file&quot;</span></span>
<span class="line"><span style="color:#babed8;"></span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>现在 Git 就会忽略对这个文件之后的更改,不会再跟踪它了。</p><p>另外,如果想把已经跟踪的目录忽略,要递归删除跟踪:</p><blockquote><p>git rm -r --cached some-directory</p></blockquote><p>总结下流程:</p><ol><li>添加要忽略的文件/目录到 .gitignore</li><li>用 git rm --cached 将已跟踪的文件/目录从暂存区删除</li><li>提交 .gitignore 及删除文件的更改</li></ol><p>这就可以让 Git 忽略原来已经跟踪的文件了,不再对其修改进行版本控制。</p><h2 id="初次开发需求前-要先拉取生产-预发分支-然后基于这个分支之上-创建自己的特性分支进行开发" tabindex="-1">初次开发需求前，要先拉取生产/预发分支，然后基于这个分支之上，创建自己的特性分支进行开发 <a class="header-anchor" href="#初次开发需求前-要先拉取生产-预发分支-然后基于这个分支之上-创建自己的特性分支进行开发" aria-hidden="true">#</a></h2><ol><li>拉取生产/预发分支</li></ol><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#babed8;">git fetch origin master:master</span></span>
<span class="line"><span style="color:#babed8;"></span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ol start="2"><li>基于拉取的分支创建自己的分支</li></ol><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#babed8;">git checkout -b feature-branch origin/master</span></span>
<span class="line"><span style="color:#babed8;"></span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ol start="3"><li>开发完成后，将代码提交到自己的分支</li></ol><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#babed8;">git add .</span></span>
<span class="line"><span style="color:#babed8;">git commit -m &quot;feat: 开发完成&quot;</span></span>
<span class="line"><span style="color:#babed8;"></span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ol start="4"><li>提交代码到远程仓库</li></ol><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#babed8;">git push origin feature-branch</span></span>
<span class="line"><span style="color:#babed8;"></span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ol start="5"><li>提交代码到远程仓库后，就可以发起 Pull Request 了</li></ol><h2 id="合并代码到主分支" tabindex="-1">合并代码到主分支 <a class="header-anchor" href="#合并代码到主分支" aria-hidden="true">#</a></h2><ol><li>切换到主分支</li></ol><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#babed8;">git checkout master</span></span>
<span class="line"><span style="color:#babed8;"></span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ol start="2"><li>拉取主分支的最新代码</li></ol><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#babed8;">git fetch origin master</span></span>
<span class="line"><span style="color:#babed8;">\`\`</span></span>
<span class="line"><span style="color:#babed8;"></span></span>
<span class="line"><span style="color:#babed8;">3. 合并自己的分支到主分支</span></span>
<span class="line"><span style="color:#babed8;"></span></span>
<span class="line"><span style="color:#babed8;"></span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>git merge origin/feature-branch</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#babed8;"></span></span>
<span class="line"><span style="color:#babed8;">4. 合并完成后，可以删除自己的分支</span></span>
<span class="line"><span style="color:#babed8;"></span></span>
<span class="line"><span style="color:#babed8;"></span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>git branch -d feature-branch \`\`</p><ol start="5"><li>提交合并后的代码到远程仓库</li></ol><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#babed8;">git push origin master</span></span>
<span class="line"><span style="color:#babed8;"></span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="删除远程分支" tabindex="-1">删除远程分支 <a class="header-anchor" href="#删除远程分支" aria-hidden="true">#</a></h2><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#babed8;">git push origin --delete feature-branch</span></span>
<span class="line"><span style="color:#babed8;"></span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="删除本地分支" tabindex="-1">删除本地分支 <a class="header-anchor" href="#删除本地分支" aria-hidden="true">#</a></h2><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#babed8;">git branch -D feature-branch</span></span>
<span class="line"><span style="color:#babed8;"></span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="代码合并错误-并且已经推送到远程分支-如何解决" tabindex="-1">代码合并错误，并且已经推送到远程分支，如何解决？ <a class="header-anchor" href="#代码合并错误-并且已经推送到远程分支-如何解决" aria-hidden="true">#</a></h2><p>假设是在本地合并，本来要把特性分支合并到 uat 分支，结果不小心合到了 release 分支</p><p>首先切换到特性分支合并到的错误分支，比如是 release</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#babed8;">git checkout release</span></span>
<span class="line"><span style="color:#babed8;"></span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>然后查看最近的合并信息（按 q 退出查看）</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#babed8;">git log --merges</span></span>
<span class="line"><span style="color:#babed8;"></span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>找到合并的 commit id，比如是 1234567890</p><p>然后撤销合并</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#babed8;">git revert 1234567890</span></span>
<span class="line"><span style="color:#babed8;"></span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>撤销远程仓库的推送</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#babed8;">git push origin release --force</span></span>
<span class="line"><span style="color:#babed8;"></span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="cherry-pick-指令" tabindex="-1">cherry-pick 指令 <a class="header-anchor" href="#cherry-pick-指令" aria-hidden="true">#</a></h2><ol><li>作用：选择某些提交的变更并将其应用到当前分支</li><li>与 merge 的区别：如果你需要另一个分支的所有代码变动。那么就采用 merge；如果你只需要部分代码变动（某几个提交），那么就采用 cherry-pick</li><li>场景：有时候分支不一定是完全按照需求号来开发的，可能按照周期来进行开发，那当前版本内的分支上，可能就会包含着很多需求的提交，这时候，如果产品要求你只上某一个需求，但是其他的暂时还不能上，那就需要使用到 cherry pick 的操作，将该需求囊括的所有提交应用到对应环境分支上。「一定要注意梳理清楚被拆分需求是由多少 commit 组成的，不要有遗漏和多选。」</li></ol><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#babed8;">## 查看最近提交（按 q 退出查看）</span></span>
<span class="line"><span style="color:#babed8;">git log</span></span>
<span class="line"><span style="color:#babed8;"></span></span>
<span class="line"><span style="color:#babed8;">## 切换到要应用的分支（比如提测时）</span></span>
<span class="line"><span style="color:#babed8;">git checkout test</span></span>
<span class="line"><span style="color:#babed8;"></span></span>
<span class="line"><span style="color:#babed8;">## 将指定的提交应用于当前分支（commitHash 就是通过第一步查询到的），这会在当前分支产生一个新的提交</span></span>
<span class="line"><span style="color:#babed8;">git cherry-pick &lt;commitHash&gt;</span></span>
<span class="line"><span style="color:#babed8;"></span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="代码回滚" tabindex="-1">代码回滚 <a class="header-anchor" href="#代码回滚" aria-hidden="true">#</a></h2><ol><li>回滚到指定的 commit id</li></ol><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#babed8;">git reset --hard &lt;commit id&gt;</span></span>
<span class="line"><span style="color:#babed8;"></span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ol start="2"><li>回滚到上一个 commit id</li></ol><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#babed8;">git reset --hard HEAD^</span></span>
<span class="line"><span style="color:#babed8;"></span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ol start="3"><li>回滚到上上一个 commit id</li></ol><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#babed8;">git reset --hard HEAD^^</span></span>
<span class="line"><span style="color:#babed8;"></span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ol start="4"><li>回滚到上 100 个 commit id</li></ol><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#babed8;">git reset --hard HEAD~100</span></span>
<span class="line"><span style="color:#babed8;"></span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="查看本地分支与之相对应关系等信息" tabindex="-1">查看本地分支与之相对应关系等信息 <a class="header-anchor" href="#查看本地分支与之相对应关系等信息" aria-hidden="true">#</a></h2><p>git remote show origin</p><h2 id="删除远程仓库中删除的分支的引用。-用到" tabindex="-1">删除远程仓库中删除的分支的引用。（用到） <a class="header-anchor" href="#删除远程仓库中删除的分支的引用。-用到" aria-hidden="true">#</a></h2><p>git fetch --prune<br> 或者 git fetch --all &amp;&amp; git remote prune</p><h2 id="删除或者说同步本地分支" tabindex="-1">删除或者说同步本地分支 <a class="header-anchor" href="#删除或者说同步本地分支" aria-hidden="true">#</a></h2><p>git remote prune origin</p><p>可以使用 -n 选项来先模拟执行这个清理操作，查看将要删除哪些引用。 git remote prune origin -n</p>`,63)])])}const m=s(i,[["render",p]]);export{u as __pageData,m as default};
